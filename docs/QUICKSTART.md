# å¿«é€Ÿå¼€å§‹æŒ‡å— ğŸš€

## é¡¹ç›®æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ªæ”¯æŒ**ç¾è‚¡**å’Œ**Aè‚¡**çš„è·¨å¸‚åœºé‡åŒ–æ•°æ®è·å–ç³»ç»Ÿï¼Œèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨ä»£ç å¹¶ä»ç›¸åº”çš„æ•°æ®æºè·å–æ•°æ®ã€‚

## æ ¸å¿ƒç‰¹æ€§

âœ… **è‡ªåŠ¨å¸‚åœºè¯†åˆ«**
- ç¾è‚¡ï¼š1-5ä¸ªå­—æ¯ï¼ˆAAPLã€MSFTã€GOOGLï¼‰
- Aè‚¡ï¼š6ä½æ•°å­—ï¼ˆ600519ã€000001ï¼‰

âœ… **å¤šæ•°æ®æºæ”¯æŒ**
- ç¾è‚¡ï¼šyfinance
- Aè‚¡ï¼šAkShare

âœ… **ç»Ÿä¸€æ•°æ®æ ¼å¼**
- æ‰€æœ‰æ•°æ®ç»Ÿä¸€ä¸º OHLCV æ ¼å¼
- è‡ªåŠ¨å¤„ç†æ—¶åŒºï¼ˆUS/Easternã€Asia/Shanghaiï¼‰

âœ… **æ™ºèƒ½ç¼“å­˜**
- Parquet æ ¼å¼æœ¬åœ°ç¼“å­˜
- æ˜¾è‘—æå‡æ•°æ®è®¿é—®é€Ÿåº¦

## å®‰è£…

```bash
cd /Users/yushuqi/Desktop/code/quant_project
pip install -r requirements.txt
```

## åŸºæœ¬ä½¿ç”¨

```python
from src.data_engine import DataManager

# åˆ›å»ºæ•°æ®ç®¡ç†å™¨
dm = DataManager(data_dir="data")

# è·å–ç¾è‚¡æ•°æ®ï¼ˆè‡ªåŠ¨è¯†åˆ«å¸‚åœºï¼‰
df_aapl = dm.fetch_data("AAPL")

# è·å–Aè‚¡æ•°æ®
df_maotai = dm.fetch_data("600519")

# æ‰¹é‡è·å– Mag7
mag7 = ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'NVDA', 'META', 'TSLA']
data = dm.fetch_multiple(mag7)

# è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´
df = dm.fetch_data("NVDA", start_date="2024-01-01", end_date="2024-06-30")
```

## è¿è¡Œç¤ºä¾‹

```bash
# è¿è¡Œæµ‹è¯•
python test_data_engine.py

# è¿è¡Œä½¿ç”¨ç¤ºä¾‹
python example_usage.py
```

## æ•°æ®æ ¼å¼

```python
DatetimeIndex: date (timezone-aware)
Columns:
  - open: float64
  - high: float64
  - low: float64
  - close: float64
  - volume: int64
  - market: str ('US' or 'CN')
  - symbol: str
```

## å®é™…è¿è¡Œç»“æœ

### Mag7 æœ€è¿‘ä¸€å¹´è¡¨ç°ï¼ˆ2024-12-20 æ•°æ®ï¼‰

| è‚¡ç¥¨   | æ”¶ç›Šç‡    | æ³¢åŠ¨ç‡ | æœ€æ–°ä»·     |
|--------|-----------|--------|-----------|
| AAPL   | +8.02%    | 2.06%  | $273.67   |
| MSFT   | +12.12%   | 1.54%  | $485.92   |
| GOOGL  | +61.10%   | 2.05%  | $307.16   |
| AMZN   | +1.08%    | 2.18%  | $227.35   |
| NVDA   | +34.40%   | 3.14%  | $180.99   |
| META   | +12.92%   | 2.41%  | $658.77   |
| TSLA   | +14.28%   | 4.05%  | $481.20   |

### Aè‚¡æ ·æœ¬ï¼ˆæœ€è¿‘ä¸€å¹´è¡¨ç°ï¼‰

| è‚¡ç¥¨          | ä»£ç    | æ”¶ç›Šç‡    |
|---------------|--------|-----------|
| è´µå·èŒ…å°      | 600519 | -4.11%    |
| äº”ç²®æ¶²        | 000858 | -18.06%   |
| æ‹›å•†é“¶è¡Œ      | 600036 | +16.93%   |

## é¡¹ç›®ç»“æ„

```
quant_project/
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ claude.md              # å¼€å‘æŒ‡å—
â”œâ”€â”€ src/
â”‚   â””â”€â”€ data_engine/           # âœ… å·²å®Œæˆ
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ base.py            # åŸºç¡€ç±»å®šä¹‰
â”‚       â”œâ”€â”€ us_fetcher.py      # ç¾è‚¡æ•°æ®è·å–
â”‚       â”œâ”€â”€ cn_fetcher.py      # Aè‚¡æ•°æ®è·å–
â”‚       â””â”€â”€ data_manager.py    # ç»Ÿä¸€æ•°æ®ç®¡ç†å™¨
â”œâ”€â”€ data/                      # æœ¬åœ°ç¼“å­˜ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ us/                    # ç¾è‚¡æ•°æ®
â”‚   â””â”€â”€ cn/                    # Aè‚¡æ•°æ®
â”œâ”€â”€ test_data_engine.py        # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ example_usage.py           # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ requirements.txt           # ä¾èµ–åŒ…
â”œâ”€â”€ README.md                  # è¯¦ç»†æ–‡æ¡£
â””â”€â”€ QUICKSTART.md             # æœ¬æ–‡ä»¶
```

## ä¸‹ä¸€æ­¥

data_engine æ¨¡å—å·²ç»å®Œæˆï¼æ¥ä¸‹æ¥å¯ä»¥å®ç°ï¼š

1. **å› å­è®¡ç®—å±‚** (`src/factors/`)
   - Qlib é£æ ¼ç®—å­ï¼ˆRef, Std, Slope ç­‰ï¼‰
   - Alpha158/360 å› å­

2. **ç­–ç•¥å±‚** (`src/strategies/`)
   - Mag7 5æ—¥æ‹©è‚¡ç­–ç•¥
   - RankMSE æŸå¤±å‡½æ•°

3. **å›æµ‹å¼•æ“** (`src/backtester/`)
   - Backtrader é›†æˆ
   - æ€§èƒ½åˆ†æ

## æŠ€æœ¯ç»†èŠ‚

### æ—¶åŒºå¤„ç†
- ç¾è‚¡ï¼šUS/Eastern
- Aè‚¡ï¼šAsia/Shanghai
- æ‰€æœ‰æ—¥æœŸæ—¶é—´å¯¹è±¡éƒ½æ˜¯ timezone-aware

### ç¼“å­˜æœºåˆ¶
- æ ¼å¼ï¼šParquetï¼ˆé«˜æ•ˆå‹ç¼©ï¼‰
- ä½ç½®ï¼š`data/{market}/{symbol}.parquet`
- ç­–ç•¥ï¼šæŒ‰éœ€æ›´æ–°ï¼ŒèŒƒå›´æ£€æŸ¥

### é”™è¯¯å¤„ç†
- è‡ªåŠ¨è¯†åˆ«æ— æ•ˆè‚¡ç¥¨ä»£ç 
- ç½‘ç»œè¯·æ±‚å¤±è´¥é‡è¯•
- æ•°æ®ç¼ºå¤±å¤„ç†

## å¸¸è§é—®é¢˜

**Q: å¦‚ä½•æ¸…é™¤ç¼“å­˜ï¼Ÿ**
```python
dm.clear_cache("AAPL")  # æ¸…é™¤å•ä¸ª
dm.clear_cache()        # æ¸…é™¤å…¨éƒ¨
```

**Q: å¦‚ä½•è·å–æ›´é•¿æ—¶é—´çš„æ•°æ®ï¼Ÿ**
```python
df = dm.fetch_data("AAPL", start_date="2020-01-01", end_date="2024-12-31")
```

**Q: æ•°æ®æ›´æ–°é¢‘ç‡ï¼Ÿ**
- ç¼“å­˜æ•°æ®ä¸ä¼šè‡ªåŠ¨æ›´æ–°
- ä½¿ç”¨ `use_cache=False` å¼ºåˆ¶åˆ·æ–°

## è”ç³»ä¸è´¡çŒ®

æ¬¢è¿æå‡ºå»ºè®®å’Œæ”¹è¿›æ„è§ï¼ğŸ‰

